.container
  %h2.text-success SMS Quiz
  .span12
    .span5
      %p
        %b Keyword:
        = @quiz.keyword
      %p
        %b Welcome Message:
        = @quiz.welcome_message
      %p
        %b Correct Answer Message:
        = @quiz.correct_answer
      %p
        %b Incorrect Answer Message:
        = @quiz.incorrect_answer
      %p
        %b Enabled:
        = @quiz.enabled

    .span6
      .well
        %h3.text-info Questions (# #{@quiz.quiz_questions.count()})
        %table.table.table-bordered.table-condensed.table-stripped
          %thead
            %tr
              %th
                Question
              %th
                Answers
          %tbody
            -@quiz.quiz_questions.all().each do |question|
              %tr
                %td
                  =question.question
                %td
                  -question.quiz_question_answers.all().each do |answer|
                    -if answer.correct_answer == true
                      %div{:style => 'color: green; background-color: white'}
                        %b #{answer.letter}. #{answer.answer}
                        %br
                    -else
                      #{answer.letter}. #{answer.answer}
                      %br
.span11.well
  %h3.text-info Quiz Entries
  %table.table.table-bordered.table-condensed.table-stripped
    %thead
      %tr
        %th Cell Number
        %th Question & Answers
    %tbody
      -QuizEntry.find_all_by_quiz_id(@quiz.id).each do |x|
        %tr
          %td
            =x.cell_number
          %td
            -QuizQuestion.find_all_by_quiz_id(@quiz.id).each do |question|
              =question.question
              %br
              -received_answer = QuizQuestionAnswer.find(QuizEntryAnswer.find_by_quiz_entry_id_and_quiz_question_answer_id(x.id, question.id).quiz_question_answer_id)
              %b Answer: #{received_answer.letter}). #{received_answer.answer}
              -correct_answer = QuizQuestionAnswer.find_by_quiz_question_id_and_correct_answer(question.id, 1).letter

              %br
              -if received_answer.letter == correct_answer
                -@color = 'green'
              -else
                -@color = 'red'
              %b{:style => "color: #{@color};"} This answer is #{received_answer.letter == correct_answer ? 'Correct' : 'Incorrect'}

              %br
              %br


.span11
  .form-actions
    = link_to 'Edit', edit_quiz_path(@quiz), :class => 'btn btn-primary'
    = link_to 'Back', quizzes_path, :class => 'btn'
